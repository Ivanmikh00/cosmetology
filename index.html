<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Тренажёр процедур</title>
<style>
:root{
--bg:#fdf8fa;
--card:#ffffff;
--muted:#8b6b7a;
--accent:#f5e1e8;
--accent-dark:#d94d7e;
--ok:#47b560;
--err:#e05b5b;
--shadow: 0 4px 12px rgba(217, 77, 126, 0.08);
--radius:12px;
font-family: Inter, "Helvetica Neue", Arial, sans-serif;
-webkit-font-smoothing:antialiased;
-moz-osx-font-smoothing:grayscale;
}
html,body{height:100%}
body{
margin:0;
background: var(--bg);
display:flex;
align-items:center;
justify-content:center;
padding:18px;
color:#5a3a45;
}
.app {width:100%;max-width:480px;min-height:680px;display:flex;flex-direction:column;gap:16px;}
header{display:flex;align-items:center;gap:12px;}
.logo {width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,var(--accent-dark),#e8a8c4);box-shadow:var(--shadow);display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:18px;}
h1{font-size:18px;margin:0;color:#5a3a45;font-weight:600;}
p.lead{margin:0;color:var(--muted);font-size:13px;line-height:1.4;}
main.container {flex:1;display:flex;align-items:center;justify-content:center;padding:8px;}
.card-wrap{width:100%;max-width:440px;}
.card {background:var(--card);border-radius:var(--radius);padding:20px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:16px;transition: transform .3s ease, opacity .3s ease;will-change:transform,opacity;border:1px solid #f0e1e8;}
.desc{font-size:15px;color:#5a3a45;line-height:1.5;white-space:pre-line;font-weight:500;}
.meta{font-size:12px;color:var(--muted)}
.inputs{display:flex;gap:12px;flex-direction:column}
input[type="text"]{flex:1;padding:14px 16px;border-radius:10px;border:1px solid #e8d5de;background:#fcf8fa;font-size:15px;outline:none;transition:box-shadow .18s,border-color .18s;color:#5a3a45;}
input[type="text"]::placeholder{color:#b8a1ab}
input[type="text"]:focus{border-color:var(--accent-dark);box-shadow:0 0 0 2px rgba(217, 77, 126, 0.1);}
.actions{display:flex;gap:10px;align-items:center;}
button.check{padding:12px 20px;border-radius:10px;border:0;background:var(--accent-dark);color:white;font-weight:600;font-size:15px;cursor:pointer;transition:background 0.2s;}
button.check:hover{background:#c94575;}
button.ghost{padding:10px 16px;border-radius:10px;border:1px solid #e8d5de;background:#fff;font-weight:500;cursor:pointer;color:var(--muted);transition:all 0.2s;}
button.ghost:hover{background:#fcf8fa;border-color:var(--accent-dark);color:var(--accent-dark);}
button.hint-btn{padding:10px 16px;border-radius:10px;border:1px solid #e8d5de;background:#f9f0f4;font-weight:500;font-size:14px;cursor:pointer;color:#a35679;transition:all 0.2s;}
button.hint-btn:hover{background:#f5e6ed;color:var(--accent-dark);}
.input-ok{border-color:var(--ok)!important;box-shadow:0 0 0 2px rgba(71,181,96,0.1)!important;}
.input-err{border-color:var(--err)!important;box-shadow:0 0 0 2px rgba(224,91,91,0.1)!important;}
.fade-away{opacity:0;transform:translateY(-12px) scale(.98);pointer-events:none;}
.shake{animation:shake .36s cubic-bezier(.36,.07,.19,.97);}
@keyframes shake{0%{transform:translateX(0)}20%{transform:translateX(-6px)}40%{transform:translateX(6px)}60%{transform:translateX(-4px)}80%{transform:translateX(4px)}100%{transform:translateX(0)}}
.footer{display:flex;align-items:center;justify-content:space-between;gap:12px;}
.progress{height:8px;background:#f0e1e8;border-radius:999px;flex:1;margin-right:12px;overflow:hidden;}
.progress>i{display:block;height:100%;width:0%;background:var(--accent-dark);transition:width .45s;}
.score{font-size:13px;color:var(--muted);min-width:120px;text-align:right}
.center{text-align:center;padding:18px;}
.inputs-column{display:flex;flex-direction:column;gap:10px;}
.hint-content{font-size:13px;color:#6a4d5c;background:#f9f0f4;padding:14px;border-radius:10px;margin-top:8px;border-left:3px solid var(--accent-dark);display:none;line-height:1.5;}
.hint-content.show{display:block;}
.hint-text{font-size:11px;color:#a35679;margin-top:4px;}
.answer-highlight{color:var(--accent-dark);font-weight:600;background:#f5e6ed;padding:2px 6px;border-radius:4px;}
.card-header{display:flex;align-items:center;gap:8px;margin-bottom:4px;}
.card-icon{width:20px;height:20px;border-radius:6px;background:var(--accent-dark);display:flex;align-items:center;justify-content:center;color:white;font-size:10px;font-weight:600;}
@media (max-width:420px){ 
    .card{padding:16px} 
    .actions{flex-direction:column;}
    button{width:100%;justify-content:center;}
}
</style>
</head>
<body>
<div class="app" role="application" aria-label="Тренажёр процедур">
<header>
<div class="logo">P</div>
<div>
<h1>Тренажёр процедур</h1>
<p class="lead">Отвечай по описанию. Аппаратные — ввести процедуру + аппарат, инъекции/эстетика — только название процедуры.</p>
</div>
</header>

<main class="container">
<div class="card-wrap" id="cardWrap" aria-live="polite"></div>
</main>

<div class="footer">
<div class="progress" aria-hidden="true"><i id="prog"></i></div>
<div class="score" id="score">0 / 58</div>
</div>
</div>

<script>
const cardsData = [
// ПРИЕМЫ И КОНСУЛЬТАЦИИ
{
type:"inject",
desc:"Как называется первичный осмотр у врача, который специализируется на заболеваниях кожи, волос и ногтей?",
hint:"Правильный ответ: <span class='answer-highlight'>Первичный прием врача-дерматолога</span>\n\nЭто первый визит к специалисту для диагностики состояния кожи, постановки диагноза и назначения лечения.",
answers:{procedure:["первичный прием врача-дерматолога","прием дерматолога"]}
},
{
type:"inject",
desc:"Как называется первичный осмотр у врача, который специализируется на эстетических процедурах для кожи и коррекции возрастных изменений?",
hint:"Правильный ответ: <span class='answer-highlight'>Первичный прием врача-косметолога</span>\n\nКонсультация специалиста по эстетической медицине для подбора косметологических процедур и уходовых программ.",
answers:{procedure:["первичный прием врача-косметолога","прием косметолога"]}
},
{
type:"inject",
desc:"Как называется первичный осмотр у врача, который специализируется на проблемах волос и кожи головы?",
hint:"Правильный ответ: <span class='answer-highlight'>Первичный прием врача-трихолога</span>\n\nКонсультация специалиста по диагностике и лечению заболеваний волос и кожи головы.",
answers:{procedure:["первичный прием врача-трихолога","прием трихолога"]}
},

// ЭСТЕТИЧЕСКАЯ КОСМЕТОЛОГИЯ - ЧИСТКИ
{
type:"device",
desc:"Какая процедура глубокой очистки кожи сочетает механическую обработку, экстракцию комедонов и ультразвуковую обработку?",
hint:"Правильный ответ: <span class='answer-highlight'>Комбинированная чистка</span>\n\nМногоэтапная процедура глубокого очищения кожи, выполняемая косметологом-эстетистом или врачом.",
answers:{procedure:["комбинированная чистка"],device:["ручная техника"]}
},
{
type:"device",
desc:"Какая процедура очистки кожи использует только ультразвуковые колебания для удаления поверхностных загрязнений?",
hint:"Правильный ответ: <span class='answer-highlight'>Ультразвуковая чистка</span>\n\nБезболезненная процедура очищения кожи с помощью ультразвуковых волн.",
answers:{procedure:["ультразвуковая чистка"],device:["ультразвуковой аппарат"]}
},

// ПИЛИНГИ
{
type:"inject",
desc:"Какие три вида поверхностных химических пилингов на основе фруктовых кислот используются для обновления кожи?",
hint:"Правильный ответ: <span class='answer-highlight'>Миндальный, молочный, гликолевый пилинги</span>\n\nПоверхностные химические пилинги для улучшения текстуры кожи, осветления и борьбы с акне.",
answers:{procedure:["миндальный пилинг","молочный пилинг","гликолевый пилинг"]}
},
{
type:"inject",
desc:"Какой пилинг одновременно отшелушивает кожу и насыщает ее питательными веществами?",
hint:"Правильный ответ: <span class='answer-highlight'>BioRePeel</span>\n\nИнновационный пилинг, сочетающий эксфолиацию и биоревитализацию.",
answers:{procedure:["biorepeel","биорепил"]}
},

// УХОДОВЫЕ ПРОГРАММЫ
{
type:"inject",
desc:"Какая уходовая программа предназначена для интенсивного омоложения и борьбы с возрастными изменениями?",
hint:"Правильный ответ: <span class='answer-highlight'>Интенсивный омолаживающий уход ICON TIME</span>\n\nКомплексная программа anti-age терапии для зрелой кожи.",
answers:{procedure:["интенсивный омолаживающий уход","icon time"]}
},
{
type:"inject",
desc:"Какая уходовая программа предназначена для детоксикации и глубокого очищения кожи?",
hint:"Правильный ответ: <span class='answer-highlight'>Уходовая программа «Детокс» DdP</span>\n\nПрограмма для выведения токсинов и улучшения общего состояния кожи.",
answers:{procedure:["детокс","уход детокс"]}
},

// ИНЪЕКЦИОННЫЕ ПРЕПАРАТЫ - ЛИПОЛИТИКИ
{
type:"inject",
desc:"Какой препарат объемом 8 мл используется для инъекционного разрушения жировых клеток в проблемных зонах тела?",
hint:"Правильный ответ: <span class='answer-highlight'>Aqualyx</span> (Акваликс)\n\nИнъекционный липолитик на основе дезоксихолата натрия для коррекции локальных жировых отложений.",
answers:{procedure:["aqualyx","акваликс"]}
},
{
type:"inject",
desc:"Какой инъекционный препарат объемом 2 мл применяется для уменьшения объемов жира на небольших участках?",
hint:"Правильный ответ: <span class='answer-highlight'>Light Fit</span> (Лайт Фит)\n\nПрепарат для коррекции фигуры на небольших участках тела.",
answers:{procedure:["light fit","лайт фит"]}
},

// МЕЗОТЕРАПИЯ ЛИЦА
{
type:"inject",
desc:"Какой мезотерапевтический коктейль объемом 3 мл содержит 135 активных компонентов для общего омоложения кожи?",
hint:"Правильный ответ: <span class='answer-highlight'>NCTF 135</span>\n\nМультикомпонентный мезококтейль с гиалуроновой кислотой, витаминами и аминокислотами.",
answers:{procedure:["nctf","nctf 135"]}
},
{
type:"inject",
desc:"Какой препарат для мезотерапии на основе пептидов P199 обеспечивает выраженный лифтинг-эффект?",
hint:"Правильный ответ: <span class='answer-highlight'>Мезо-Вартон</span>\n\nПрепарат на основе пептидного комплекса для уплотнения и подтяжки кожи.",
answers:{procedure:["мезо-вартон","вартон"]}
},

// МЕЗОТЕРАПИЯ ВОЛОС
{
type:"inject",
desc:"Какой японский препарат на основе гидролизата плаценты применяется для лечения выпадения волос?",
hint:"Правильный ответ: <span class='answer-highlight'>Мэлсмон</span>\n\nПлацентарный препарат с комплексом биологически активных компонентов.",
answers:{procedure:["мэлсмон","melcmon"]}
},
{
type:"inject",
desc:"Какой японский инъекционный препарат объемом 2 мл используется для стимуляции роста волос?",
hint:"Правильный ответ: <span class='answer-highlight'>Курасен</span>\n\nПрепарат для мезотерапии волосистой части головы с витаминами и аминокислотами.",
answers:{procedure:["курасен","curaesen"]}
},

// ПЛАЗМОТЕРАПИЯ
{
type:"inject",
desc:"Какая процедура предполагает использование собственной обогащенной тромбоцитами плазмы для стимуляции регенерации?",
hint:"Правильный ответ: <span class='answer-highlight'>PRP-терапия</span>\n\nАутологичная процедура с использованием плазмы, обогащенной тромбоцитами.",
answers:{procedure:["prp","prp cortexil"]}
},

// БИОРЕВИТАЛИЗАЦИЯ
{
type:"inject",
desc:"Какой препарат для интенсивного увлажнения содержит стабилизированную гиалуроновую кислоту высокой концентрации?",
hint:"Правильный ответ: <span class='answer-highlight'>Revi Strong</span>\n\nБиоревитализант для глубокого увлажнения и anti-age терапии.",
answers:{procedure:["revi strong"]}
},
{
type:"inject",
desc:"Какой препарат линейки Plinest с ускоренным действием используется для быстрого восстановления кожи?",
hint:"Правильный ответ: <span class='answer-highlight'>Plinest Fast</span>\n\nБиоревитализант с быстрым началом действия.",
answers:{procedure:["plinest fast"]}
},

// КОНТУРНАЯ ПЛАСТИКА - ЛИФТИНГ
{
type:"inject",
desc:"Какой препарат для лифтинга стимулирует выработку собственного коллагена для подтяжки кожи?",
hint:"Правильный ответ: <span class='answer-highlight'>Plla-28</span>\n\nСтимулятор неоколлагенеза на основе поли-L-молочной кислоты.",
answers:{procedure:["plla","plla-28"]}
},
{
type:"inject",
desc:"Какой филлер на основе гидроксиапатита кальция объемом 1,5 мл используется для объемного моделирования?",
hint:"Правильный ответ: <span class='answer-highlight'>Radiesse</span>\n\nОбъемный филлер с immediate эффектом и стимуляцией коллагена.",
answers:{procedure:["radiesse","радиес"]}
},

// ФИЛЛЕРЫ ДЛЯ ГУБ
{
type:"inject",
desc:"Какой специализированный филлер объемом 1 мл используется для коррекции и увеличения губ?",
hint:"Правильный ответ: <span class='answer-highlight'>Viscoline Lips</span>\n\nФиллер с оптимальной плотностью для работы с нежной кожей губ.",
answers:{procedure:["viscoline lips"]}
},
{
type:"inject",
desc:"Какой популярный филлер для губ объемом 1 мл используется для коррекции контура и объема?",
hint:"Правильный ответ: <span class='answer-highlight'>Belotero</span>\n\nЛинейка филлеров для контурной пластики губ разной плотности.",
answers:{procedure:["belotero","белотеро"]}
},

// БОТУЛИНОТЕРАПИЯ
{
type:"inject",
desc:"Какой препарат ботулотоксина российского производства используется для коррекции мимических морщин?",
hint:"Правильный ответ: <span class='answer-highlight'>Релатокс</span>\n\nРоссийский аналог ботулотоксина типа А.",
answers:{procedure:["релатокс"]}
},
{
type:"inject",
desc:"Какой препарат ботулотоксина французского производства используется в дозировке 200 ед. для лечения гипергидроза?",
hint:"Правильный ответ: <span class='answer-highlight'>Диспорт</span>\n\nФранцузский препарат для коррекции морщин и лечения повышенной потливости.",
answers:{procedure:["диспорт"]}
},

// АППАРАТНЫЕ ПРОЦЕДУРЫ - LUMECCA
{
type:"device",
desc:"На каком аппарате проводится процедура IPL-фотоомоложения для лечения пигментации и сосудистых нарушений?",
hint:"Правильный ответ: аппарат <span class='answer-highlight'>Lumecca</span>\n\nМощный IPL-аппарат для фотоомоложения и лечения различных эстетических проблем.",
answers:{procedure:["фотоомоложение","ipl фотоомоложение"],device:["lumecca"]}
},

// АППАРАТНЫЕ ПРОЦЕДУРЫ - MORPHEUS-8
{
type:"device",
desc:"Какой аппарат используется для фракционного микроигольчатого RF-лифтинга с глубиной проникновения до 8 мм?",
hint:"Правильный ответ: <span class='answer-highlight'>Morpheus-8</span>\n\nАппарат для фракционного радиочастотного лифтинга, сочетающий микроиглы с RF-энергией.",
answers:{procedure:["фракционный rf-лифтинг","morpheus-8"],device:["morpheus-8"]}
},

// АППАРАТНЫЕ ПРОЦЕДУРЫ - ULTRAFORMER
{
type:"device",
desc:"Какой ультразвуковой аппарат используется для SMAS-лифтинга и глубокой подтяжки кожи?",
hint:"Правильный ответ: аппарат <span class='answer-highlight'>Ultraformer III</span>\n\nУльтразвуковой аппарат для неинвазивного лифтинга с фокусировкой на SMAS-слое.",
answers:{procedure:["smas-лифтинг","ультразвуковой лифтинг"],device:["ultraformer","ultraformer-3"]}
},

// ЛАЗЕРНЫЕ ПРОЦЕДУРЫ
{
type:"device",
desc:"Какая лазерная процедура используется для шлифовки кожи, удаления морщин и рубцов?",
hint:"Правильный ответ: <span class='answer-highlight'>CO2 лазерная шлифовка</span>\n\nФракционная лазерная шлифовка для омоложения и улучшения текстуры кожи.",
answers:{procedure:["лазерная шлифовка","co2 шлифовка"],device:["co2 лазер"]}
},

// УДАЛЕНИЕ НОВООБРАЗОВАНИЙ
{
type:"device",
desc:"Какая процедура используется для удаления родинок, папиллом и других образований на коже?",
hint:"Правильный ответ: <span class='answer-highlight'>Удаление новообразований</span>\n\nХирургическое или аппаратное удаление доброкачественных образований кожи.",
answers:{procedure:["удаление новообразований","удаление родинок"]}
},

// ЛАЗЕРНАЯ ЭПИЛЯЦИЯ
{
type:"device",
desc:"Какая процедура используется для удаления нежелательных волос на различных участках тела?",
hint:"Правильный ответ: <span class='answer-highlight'>Лазерная эпиляция</span>\n\nАппаратная методика удаления волос с помощью лазерного воздействия.",
answers:{procedure:["лазерная эпиляция","эпиляция"],device:["лазерный аппарат"]}
},

// НОВЫЕ КАРТОЧКИ НА ОСНОВЕ ФАЙЛА
{
type:"inject",
desc:"Какая процедура удаляет белые подкожные бугорки, известные как 'просянки'?",
hint:"Правильный ответ: <span class='answer-highlight'>Удаление милиумов</span>\n\nТочечное удаление белых подкожных бугорков механическим способом.",
answers:{procedure:["удаление милиумов"]}
},
{
type:"inject",
desc:"Какая процедура сочетает глубокое очищение с мягким обновлением кожи для улучшения рельефа и сияния?",
hint:"Правильный ответ: <span class='answer-highlight'>Комбинированная чистка + пилинг</span>\n\nСочетание глубокого очищения с мягким химическим пилингом.",
answers:{procedure:["комбинированная чистка + пилинг"]}
},
{
type:"inject",
desc:"Какой итальянский биопилинг не требует периода восстановления?",
hint:"Правильный ответ: <span class='answer-highlight'>BioRePeel</span>\n\nИнновационный пилинг, который обновляет кожу без шелушения и покраснения.",
answers:{procedure:["biorepeel","биорепил"]}
},
{
type:"inject",
desc:"Какой пилинг дает эффект лифтинга и сияния без шелушения?",
hint:"Правильный ответ: <span class='answer-highlight'>PRX-T33</span>\n\nПилинг, сочетающий трихлоруксусную кислоту и перекись водорода для лифтинга.",
answers:{procedure:["prx-t33","prx t33"]}
},
{
type:"inject",
desc:"Какой интенсивный пилинг осветляет пигментацию и улучшает текстуру кожи?",
hint:"Правильный ответ: <span class='answer-highlight'>Пилинг Джесснера</span>\n\nСостав с резорцином, молочной и салициловой кислотами для интенсивного обновления.",
answers:{procedure:["пилинг джесснера","джесснера"]}
},
{
type:"inject",
desc:"Какой уход выравнивает тон кожи и уменьшает темные пятна?",
hint:"Правильный ответ: <span class='answer-highlight'>Антипигментный уход DdP</span>\n\nСпециализированная программа для борьбы с гиперпигментацией.",
answers:{procedure:["антипигментный уход","антипигментный уход ddp"]}
},
{
type:"inject",
desc:"Какой уход предназначен для чувствительной кожи, склонной к покраснению?",
hint:"Правильный ответ: <span class='answer-highlight'>Forget me red</span>\n\nУспокаивающий уход для снижения покраснений и раздражений.",
answers:{procedure:["forget me red"]}
},
{
type:"inject",
desc:"Какой препарат для мезотерапии защищает кожу от стресса и фотостарения?",
hint:"Правильный ответ: <span class='answer-highlight'>Мезо-Ксантин F199</span>\n\nПрепарат с антиоксидантным действием для защиты от внешних агрессивных факторов.",
answers:{procedure:["мезо-ксантин","мезо-ксантин f199"]}
},
{
type:"inject",
desc:"Какой препарат для мезотерапии области вокруг глаз уменьшает темные круги и отеки?",
hint:"Правильный ответ: <span class='answer-highlight'>Meso-Eye С71</span>\n\nСпециализированный препарат для нежной кожи периорбитальной зоны.",
answers:{procedure:["meso-eye","meso-eye c71"]}
},
{
type:"inject",
desc:"Какой препарат NCTF используется для укрепления и питания волос?",
hint:"Правильный ответ: <span class='answer-highlight'>NCTF 135 HA для волос</span>\n\nМезококтейль для кожи головы, укрепляющий волосяные фолликулы.",
answers:{procedure:["nctf для волос","nctf 135 ha для волос"]}
},
{
type:"inject",
desc:"Какой препарат серии Revi предназначен для зоны вокруг глаз?",
hint:"Правильный ответ: <span class='answer-highlight'>Revi Eye</span>\n\nСпециализированный биоревитализант для периорбитальной области.",
answers:{procedure:["revi eye"]}
},
{
type:"inject",
desc:"Какой препарат серии Revi предназначен для увлажнения и мягкости кожи?",
hint:"Правильный ответ: <span class='answer-highlight'>Revi Silk</span>\n\nБиоревитализант для интенсивного увлажнения и улучшения текстуры кожи.",
answers:{procedure:["revi silk"]}
},
{
type:"inject",
desc:"Какой препарат на основе полинуклеотидов выравнивает цвет лица и делает кожу плотнее?",
hint:"Правильный ответ: <span class='answer-highlight'>Plinest</span>\n\nБиоревитализант с полинуклеотидами для восстановления и уплотнения кожи.",
answers:{procedure:["plinest"]}
},
{
type:"inject",
desc:"Какой инновационный препарат дает мощный лифтинг-эффект без утяжеления?",
hint:"Правильный ответ: <span class='answer-highlight'>Profilo</span>\n\nБиоревитализация с высокой концентрацией гиалуроновой кислоты.",
answers:{procedure:["profilo"]}
},
{
type:"inject",
desc:"Какой препарат Hyalrepair восстанавливает кожу после стресса и усталости?",
hint:"Правильный ответ: <span class='answer-highlight'>Hyalrepair</span>\n\nЛинейка препаратов для восстановления кожи после стрессовых воздействий.",
answers:{procedure:["hyalrepair"]}
},
{
type:"inject",
desc:"Какой препарат Novocutan активизирует синтез коллагена для возрастной кожи?",
hint:"Правильный ответ: <span class='answer-highlight'>Novocutan</span>\n\nВосстанавливающий препарат на основе нуклеотидов для зрелой кожи.",
answers:{procedure:["novocutan"]}
},
{
type:"inject",
desc:"Какой препарат Bellarti восстанавливает тонус и эластичность кожи?",
hint:"Правильный ответ: <span class='answer-highlight'>Bellarti</span>\n\nБиоревитализант для улучшения тонуса и упругости кожи.",
answers:{procedure:["bellarti"]}
},
{
type:"inject",
desc:"Какой коллагеновый препарат используется для омоложения и восстановления тонуса кожи?",
hint:"Правильный ответ: <span class='answer-highlight'>Коллост микро</span>\n\nКоллагеновый препарат для стимуляции собственного коллагена кожи.",
answers:{procedure:["коллост микро"]}
},
{
type:"inject",
desc:"Какой биогель создает каркас и упругость кожи для контурной коррекции?",
hint:"Правильный ответ: <span class='answer-highlight'>Сферогель</span>\n\nБиогель разной плотности для моделирования контуров лица.",
answers:{procedure:["сферогель"]}
},
{
type:"inject",
desc:"Какой фермент используется для расщепления введенных филлеров?",
hint:"Правильный ответ: <span class='answer-highlight'>Лонгидаза</span>\n\nФермент для коррекции результатов контурной пластики.",
answers:{procedure:["лонгидаза"]}
},
{
type:"inject",
desc:"Какой препарат местного обезболивания используется перед инъекциями?",
hint:"Правильный ответ: <span class='answer-highlight'>Ультракаин / Лидокаин</span>\n\nМестные анестетики для комфортного проведения процедур.",
answers:{procedure:["ультракаин","лидокаин"]}
},
{
type:"inject",
desc:"Какие нити используются для подтяжки лица и шеи?",
hint:"Правильный ответ: <span class='answer-highlight'>Нитевой лифтинг (Коги, Aptos, PDO, PLLA)</span>\n\nРазличные типы нитей для нехирургической подтяжки тканей.",
answers:{procedure:["нитевой лифтинг","нити"]}
},
{
type:"device",
desc:"Какая процедура использует слабый электрический ток для улучшения тонуса мышц лица?",
hint:"Правильный ответ: <span class='answer-highlight'>Микротоковая терапия</span>\n\nАппаратная процедура для тонизирования мышц и улучшения микроциркуляции.",
answers:{procedure:["микротоковая терапия","микротоки"],device:["микротоковый аппарат"]}
},
{
type:"device",
desc:"Какой аппарат использует радиочастотную энергию и вакуум для коррекции тела?",
hint:"Правильный ответ: <span class='answer-highlight'>BodyFX</span>\n\nАппарат для уменьшения жировых отложений и подтяжки кожи тела.",
answers:{procedure:["bodyfx","коррекция тела"],device:["bodyfx"]}
},
{
type:"device",
desc:"Какой аппарат использует радиочастотную энергию для термолифтинга и липомоделирования?",
hint:"Правильный ответ: <span class='answer-highlight'>FaceTite</span>\n\nИнновационный аппарат для подтяжки кожи изнутри и уменьшения жира.",
answers:{procedure:["facetite","термолифтинг"],device:["facetite"]}
},
{
type:"device",
desc:"Какая процедура использует красный/инфракрасный свет для ускорения заживления после агрессивных процедур?",
hint:"Правильный ответ: <span class='answer-highlight'>Фотобиомодуляция</span>\n\nВосстановительная световая терапия после инвазивных процедур.",
answers:{procedure:["фотобиомодуляция","постпроцедурное восстановление"],device:["световой аппарат"]}
},
{
type:"device",
desc:"Какая процедура сочетает фотосенсибилизирующий гель и красный/синий свет для лечения акне?",
hint:"Правильный ответ: <span class='answer-highlight'>Фотодинамическая терапия HELEO4</span>\n\nКомбинированная методика для лечения акне, купероза и пигментации.",
answers:{procedure:["фотодинамическая терапия","heleo4"],device:["heleo4"]}
}
];

function shuffle(array){
for(let i=array.length-1;i>0;i--){
const j=Math.floor(Math.random()*(i+1));
[array[i],array[j]]=[array[j],array[i]];
}
return array;
}
shuffle(cardsData);

let currentIndex = 0;
let correctCount = 0;

const cardWrap = document.getElementById('cardWrap');
const progBar = document.getElementById('prog');
const scoreEl = document.getElementById('score');

function normalize(s){
if(!s) return '';
return String(s).toLowerCase().replace(/ё/g,'е').replace(/[^a-zа-я0-9\s]+/gi,' ').replace(/\s+/g,' ').trim();
}

function matchAny(input,variants){
const n = normalize(input);
if(!n) return false;
for(const v of variants){
const nv = normalize(v);
if(!nv) continue;
if(n === nv) return true;
if(n.includes(nv) && nv.length >= 3) return true;
if(nv.includes(n) && n.length >= 3) return true;
}
return false;
}

function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

function renderCard(){
cardWrap.innerHTML = '';
if(currentIndex >= cardsData.length){
showCompletion();
updateProgress();
return;
}
const item = cardsData[currentIndex];
const card = document.createElement('section');
card.className = 'card';

// build inputs depending on type
let inputsHtml = '';
if(item.type === 'device'){
inputsHtml = `
<div class="inputs-column">
<input id="procInput" type="text" placeholder="Название процедуры" aria-label="Процедура" />
<div class="hint-text">Пример: фотоомоложение, лазерная эпиляция</div>
<input id="devInput" type="text" placeholder="Аппарат / платформа" aria-label="Аппарат" />
<div class="hint-text">Пример: lumecca, morpheus-8, ultraformer</div>
</div>
`;
} else {
inputsHtml = `
<div class="inputs-column">
<input id="procInput" type="text" placeholder="Название процедуры или препарата" aria-label="Процедура" />
<div class="hint-text">Пример: мезотерапия, ботулинотерапия, филлеры</div>
</div>
`;
}

card.innerHTML = `
<div class="card-header">
<div class="card-icon">${item.type === 'device' ? 'A' : item.type === 'inject' ? 'I' : 'C'}</div>
<div class="meta">${item.type === 'device' ? 'Аппаратная процедура' : item.type === 'inject' ? 'Инъекционная процедура' : 'Эстетический уход'}</div>
</div>
<div class="desc">${escapeHtml(item.desc)}</div>
<div class="inputs">
${inputsHtml}
<div class="hint-content" id="hintContent">${item.hint}</div>
<div class="actions" style="margin-top:6px">
<button class="check" id="checkBtn">Проверить</button>
<button class="hint-btn" id="hintBtn">Подсказка</button>
<button class="ghost" id="skipBtn" title="Пропустить карточку (она вернётся позже)">Пропустить</button>
</div>
</div>
<div class="meta">Карточка ${currentIndex+1} из ${cardsData.length}</div>
`;
cardWrap.appendChild(card);

const procInput = document.getElementById('procInput');
const devInput = document.getElementById('devInput');
const checkBtn = document.getElementById('checkBtn');
const hintBtn = document.getElementById('hintBtn');
const skipBtn = document.getElementById('skipBtn');
const hintContent = document.getElementById('hintContent');

setTimeout(()=> procInput.focus(), 120);

procInput.addEventListener('keydown', (e)=>{
if(e.key === 'Enter'){
if(devInput) devInput.focus(); else attemptAnswer();
}
});
if(devInput){
devInput.addEventListener('keydown', (e)=>{
if(e.key === 'Enter') attemptAnswer();
});
}

checkBtn.addEventListener('click', attemptAnswer);
hintBtn.addEventListener('click', ()=> {
hintContent.classList.toggle('show');
});
skipBtn.addEventListener('click', skipCard);
updateProgress();
}

function attemptAnswer(){
const item = cardsData[currentIndex];
const procInput = document.getElementById('procInput');
const devInput = document.getElementById('devInput');

const procVal = procInput ? procInput.value.trim() : '';
const devVal = devInput ? devInput.value.trim() : '';

const okProc = matchAny(procVal, item.answers.procedure || []);
let okDev = true;
if(item.type === 'device'){
okDev = matchAny(devVal, item.answers.device || []);
}

if(okProc && okDev){
if(procInput) procInput.classList.remove('input-err'), procInput.classList.add('input-ok');
if(devInput) devInput.classList.remove('input-err'), devInput.classList.add('input-ok');

const cardEl = cardWrap.querySelector('.card');
setTimeout(()=> {
cardEl.classList.add('fade-away');
setTimeout(()=>{
currentIndex++;
correctCount++;
renderCard();
}, 380);
}, 200);
} else {
const cardEl = cardWrap.querySelector('.card');
cardEl.classList.remove('shake');
void cardEl.offsetWidth;
cardEl.classList.add('shake');
if(!okProc && procInput) procInput.classList.add('input-err'); else if(procInput) procInput.classList.remove('input-err');
if(item.type === 'device'){
if(!okDev && devInput) devInput.classList.add('input-err'); else if(devInput) devInput.classList.remove('input-err');
}
setTimeout(()=>{
if(procInput) procInput.value = '';
if(devInput) devInput.value = '';
if(procInput) { procInput.classList.remove('input-err'); procInput.focus(); }
}, 360);
}
updateProgress();
}

function skipCard(){
const item = cardsData.splice(currentIndex,1)[0];
cardsData.push(item);
if(currentIndex >= cardsData.length) currentIndex = 0;
renderCard();
}

function updateProgress(){
const total = cardsData.length;
const done = correctCount;
const perc = Math.round((done / total) * 100);
progBar.style.width = perc + '%';
scoreEl.textContent = `${done} / ${total}`;
}

function showCompletion(){
cardWrap.innerHTML = '';
const wrap = document.createElement('div');
wrap.className = 'card';
wrap.innerHTML = `
<div class="center">
<div style="font-size:20px;font-weight:700">Отлично — закончено!</div>
<div class="meta" style="margin-top:8px">Правильных ответов: <strong>${correctCount}</strong> из ${cardsData.length}.</div>
<div style="margin-top:12px">
<button class="check" id="restartBtn">Пройти снова</button>
<button class="ghost" id="listBtn" style="margin-left:8px">Просмотреть карточки</button>
</div>
</div>
`;
cardWrap.appendChild(wrap);

document.getElementById('restartBtn').addEventListener('click', ()=> {
shuffle(cardsData);
currentIndex = 0;
correctCount = 0;
renderCard();
});
document.getElementById('listBtn').addEventListener('click', showAllList);
}

function showAllList(){
cardWrap.innerHTML = '';
const wrap = document.createElement('div');
wrap.className = 'card';
let html = '<div style="font-weight:700;margin-bottom:8px">Карточки — обзор (описания)</div><ol style="padding-left:18px;margin:0">';
for(const c of cardsData){
html += `<li style="margin-bottom:10px"><div style="font-weight:600">${c.type === 'device' ? 'Аппаратная' : c.type === 'inject' ? 'Инъекционная' : 'Эстетическая'}</div><div style="color:#4d555a;margin-top:6px">${escapeHtml(c.desc)}</div></li>`;
}
html += '</ol><div style="margin-top:12px;text-align:right"><button class="check" id="backBtn">Назад</button></div>';
wrap.innerHTML = html;
cardWrap.appendChild(wrap);
document.getElementById('backBtn').addEventListener('click', ()=> renderCard());
}

renderCard();
</script>
</body>
</html>
